(()=>{"use strict";function e(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function t(e,t,n="beforeend"){t.insertAdjacentElement(n,e.getElement())}const n=[{id:"cfe416cq-10xa-ye10-8077-2fs9a01edc23",basePrice:1e3,dateFrom:"2019-07-10T22:55:56.845Z",dateTo:"2019-07-11T11:22:13.375Z",destination:"cfe416cq-10xa-ye10-8077-2fs9a01edcab",isFavorite:!1,offers:["b4c3e4e6-9053-42ce-b747-e281314baa10","b4c3e4e6-9053-42ce-b747-e281314baa11","b4c3e4e6-9053-42ce-b747-e281314baa12"],type:"taxi"},{id:"cfe416cq-10xa-ye10-8077-2fs9a01edpoo",basePrice:800,dateFrom:"2019-07-10T22:55:56.845Z",dateTo:"2019-07-11T11:22:13.375Z",destination:"cfe416cq-10xa-ye10-8077-2fs9a01edcab",isFavorite:!0,offers:["b4c3e4e6-9053-42ce-b747-e281314baa1"],type:"bus"},{id:"cfe416cq-10xa-ye10-8077-2fs9a01edc29",basePrice:700,dateFrom:"2019-07-10T22:55:56.845Z",dateTo:"2019-07-11T11:22:13.375Z",destination:"cfe416cq-10xa-ye10-8077-2fs9a01edca09b",isFavorite:!1,offers:["b4c3e4e6-9053-42ce-b747-e281314baa2"],type:"drive"},{id:"cfe416cq-10xa-ye10-8077-2fs9a01edc28",basePrice:700,dateFrom:"2019-07-10T22:55:56.845Z",dateTo:"2019-07-11T11:22:13.375Z",destination:"cfe416cq-10xa-ye10-8077-2fs9a01edc23",isFavorite:!0,offers:["b4c3e4e6-9053-42ce-b747-e281314baa3","b4c3e4e6-9053-42ce-b747-e281314baa4"],type:"flight"}],i=[{id:"cfe416cq-10xa-ye10-8077-2fs9a01edcab",description:"A great place",name:"Mosсow",pictures:[{src:"http://picsum.photos/300/200?r=0.0762563005163317",description:"Mosсow"}]},{id:"cfe416cq-10xa-ye10-8077-2fs9a01edca09b",description:"A great place",name:"Amsterdam",pictures:[{src:"http://picsum.photos/300/200?r=0.0762563005163317",description:"Amsterdam"}]},{id:"cfe416cq-10xa-ye10-8077-2fs9a01edc23",description:"Amaizine",name:"Chamnoix",pictures:[{src:"http://picsum.photos/300/200?r=0.0762563005163317/45.jpg",description:"Chamnoix"}]},{id:"b4c3e4e6-9053-42ce-b747-e281314baa31",description:"Geneva",name:"Geneva",pictures:[{src:"http://picsum.photos/300/200?r=0.0762563005163317",description:"Geneva"}]},{id:"cfe416cq-10xa-ye10-8077-2fs9a01edcdfgf",description:"",name:"Geneva",pictures:[]}],s=[{type:"taxi",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa10",title:"Upgrade to a business class",price:120},{id:"b4c3e4e6-9053-42ce-b747-e281314baa11",title:"Add luggage",price:150},{id:"b4c3e4e6-9053-42ce-b747-e281314baa12",title:"Switch to comfort class",price:230}]},{type:"bus",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa1",title:"Choose seats",price:120}]},{type:"drive",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa2",title:"Rent a car",price:120}]},{type:"flight",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa3",title:"Add luggage",price:120},{id:"b4c3e4e6-9053-42ce-b747-e281314baa4",title:"Switch to comfort",price:120}]},{type:"train",offers:[]},{type:"ship",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa5",title:"Add luggage",price:120}]},{type:"check-in",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa6",title:"Add breakfast",price:120}]},{type:"sightseeing",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa7",title:"Book tickets",price:300},{id:"b4c3e4e6-9053-42ce-b747-e281314baa8",title:"Lunch in city",price:30}]},{type:"restaurant",offers:[{id:"b4c3e4e6-9053-42ce-b747-e281314baa9",title:"Vegan menu",price:300}]}];class a{getTemplate(){return'<section class="trip container"></section>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class l{getTemplate(){return'<form class="trip-events__trip-sort  trip-sort" action="#" method="get">\n   <div class="trip-sort__item  trip-sort__item--day">\n     <input id="sort-day" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-day" checked>\n     <label class="trip-sort__btn" for="sort-day">Day</label>\n   </div>\n\n   <div class="trip-sort__item  trip-sort__item--event">\n     <input id="sort-event" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-event" disabled>\n     <label class="trip-sort__btn" for="sort-event">Event</label>\n   </div>\n\n   <div class="trip-sort__item  trip-sort__item--time">\n     <input id="sort-time" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-time">\n     <label class="trip-sort__btn" for="sort-time">Time</label>\n   </div>\n\n   <div class="trip-sort__item  trip-sort__item--price">\n     <input id="sort-price" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-price">\n     <label class="trip-sort__btn" for="sort-price">Price</label>\n   </div>\n\n   <div class="trip-sort__item  trip-sort__item--offer">\n     <input id="sort-offer" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-offer" disabled>\n     <label class="trip-sort__btn" for="sort-offer">Offers</label>\n   </div>\n </form>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const r=["taxi","bus","flight","train","ship","check-in","sightseeing","restaurant"];class o{constructor(e,t,n){this.point=e,this.destinations=t,this.offers=n}getTemplate(){return function(e,t,n){const i=t.find((t=>t.id===e.id)),s=n.find((t=>t.type===e.type)).offers,a=s.filter((t=>e.offers.includes(t.id))),{dateFrom:l,dateTo:o,basePrice:c,type:p}=e,{name:d,description:v,pictures:f}=i||{},_=e.id||0;return`<li class="trip-events__item">\n    <form class="event event--edit" action="#" method="post">\n    <header class="event__header">\n      <div class="event__type-wrapper">\n        <label class="event__type  event__type-btn" for="event-type-toggle-${_}">\n          <span class="visually-hidden">Choose event type</span>\n          <img class="event__type-icon" width="17" height="17" src="img/icons/${p}.png" alt="Event type icon">\n        </label>\n        <input class="event__type-toggle  visually-hidden" id="event-type-toggle-${_}" type="checkbox">\n\n        <div class="event__type-list">\n          <fieldset class="event__type-group">\n            <legend class="visually-hidden">Event type</legend>\n\n  ${r.map((e=>`<div class="event__type-item">\n      <input id="event-type-${e}-${_}" class="event__type-input  visually-hidden" type="radio" name="event-type" value="${e}"\n      ${e===p?"checked":""}>\n      <label class="event__type-label  event__type-label--${e}" for="event-type-${e}-${_}">${e}</label>\n    </div>`)).join("")}\n          </fieldset>\n        </div>\n      </div>\n\n      <div class="event__field-group  event__field-group--destination">\n        <label class="event__label  event__type-output" for="event-destination-${_}">\n          ${p}\n        </label>\n        <input class="event__input  event__input--destination" id="event-destination-${_}" type="text" name="event-destination"\n        value="${d||""}" list="destination-list-${_}">\n        <datalist id="destination-list-${_}">\n          ${t.map((e=>`<option value="${e.name}"></option>`)).join("")}\n        </datalist>\n      </div>\n\n      <div class="event__field-group  event__field-group--time">\n        <label class="visually-hidden" for="event-start-time-${_}">From</label>\n        <input class="event__input  event__input--time" id="event-start-time-${_}" type="text" name="event-start-time" value="${l}">\n        &mdash;\n        <label class="visually-hidden" for="event-end-time-${_}">To</label>\n        <input class="event__input  event__input--time" id="event-end-time-${_}" type="text" name="event-end-time" value="${o}">\n      </div>\n\n      <div class="event__field-group  event__field-group--price">\n        <label class="event__label" for="event-price-${_}">\n          <span class="visually-hidden">Price</span>\n          &euro;\n        </label>\n        <input class="event__input  event__input--price" id="event-price-${_}" type="text" name="event-price" value="${c}">\n      </div>\n\n      <button class="event__save-btn  btn  btn--blue" type="submit">Save</button>\n      <button class="event__reset-btn" type="reset">${e.id?"Delete":"Cancel"}</button>\n      ${e.id?'<button class="event__rollup-btn" type="button">\n        <span class="visually-hidden">Open event</span>\n      </button>':""}\n  </header>\n\n    <section class="event__details">\n      ${s.length?`<section class="event__section  event__section--offers">\n          <h3 class="event__section-title  event__section-title--offers">Offers</h3>\n\n          <div class="event__available-offers">\n\n          ${s.map((e=>{const t=a.map((e=>e.id)).includes(e.id)?"checked":"";return`<div class="event__offer-selector">\n            <input class="event__offer-checkbox  visually-hidden" id="event-offer-${e.title}-${_}" type="checkbox" name="event-offer-${e.title}" ${t}>\n            <label class="event__offer-label" for="event-offer-${e.title}-${_}">\n              <span class="event__offer-title">${e.title}</span>\n              &plus;&euro;&nbsp;\n              <span class="event__offer-price">${e.price}</span>\n            </label>\n          </div>`})).join("")}\n      </div>\n      </section>`:""}\n\n\n      ${i?`<section class="event__section  event__section--destination">\n            <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n            <p class="event__destination-description">${v}</p>\n\n            ${f.length?`<div class="event__photos-container">\n                <div class="event__photos-tape">\n                  ${f.map((e=>`<img class="event__photo" src="${e.src}" alt="${e.description}">`))}\n                </div>\n              </div>`:""}\n          </section>`:""}\n    </section>\n  </form>\n  </li>`}(this.point,this.destinations,this.offers)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class c{getTemplate(){return'<ul class="trip-events__list"></ul>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class p{constructor(e,t,n){this.point=e,this.destinations=t,this.offers=n}getTemplate(){return function(e,t,n){const{isFavorite:i,basePrice:s,type:a}=e,l=n.find((t=>t.type===e.type)).offers.filter((t=>e.offers.includes(t.id))),r=t.find((t=>t.id===e.destination));return`<li class="trip-events__item">\n   <div class="event">\n     <time class="event__date" datetime="2019-03-18">MAR 18</time>\n     <div class="event__type">\n       <img class="event__type-icon" width="42" height="42" src="img/icons/${a.toLowerCase()}.png" alt="Event type icon">\n     </div>\n     <h3 class="event__title">${a} ${r.name}</h3>\n     <div class="event__schedule">\n       <p class="event__time">\n         <time class="event__start-time" datetime="2019-03-18T10:30">18.00</time>\n         &mdash;\n         <time class="event__end-time" datetime="2019-03-18T11:00">20.00</time>\n       </p>\n       <p class="event__duration">30M</p>\n     </div>\n     <p class="event__price">\n       &euro;&nbsp;<span class="event__price-value">${s}</span>\n     </p>\n     <h4 class="visually-hidden">Offers:</h4>\n     <ul class="event__selected-offers">\n     ${l.map((e=>`<li class="event__offer">\n            <span class="event__offer-title">${e.title}</span>\n            &plus;&euro;&nbsp;\n            <span class="event__offer-price">${e.price}</span>\n          </li>`)).join("")}\n     </ul>\n     <button class="event__favorite-btn ${i?"event__favorite-btn--active":""}" type="button">\n       <span class="visually-hidden">Add to favorite</span>\n       <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n         <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n       </svg>\n     </button>\n     <button class="event__rollup-btn" type="button">\n       <span class="visually-hidden">Open event</span>\n     </button>\n   </div>\n </li>`}(this.point,this.destinations,this.offers)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const d=document.querySelector(".trip-main"),v=d.querySelector(".trip-controls__filters"),f=document.querySelector(".trip-events"),_=new class{constructor(){this.points=[],this.destinations=[],this.offers=[]}init(){this.points=n,this.destinations=i,this.offers=s}getPoints(){return this.points}getDestinations(){return this.destinations}getOffers(){return this.offers}};_.init();const u=new class{tripBoardComponent=new a;tripEvenListComponent=new c;constructor({tripContainer:e,pointsModel:t}){this.tripContainer=e,this.pointsModel=t}init(){const e=this.pointsModel.getPoints(),n=this.pointsModel.getOffers(),i=this.pointsModel.getDestinations();t(this.tripBoardComponent,this.tripContainer),t(new l,this.tripBoardComponent.getElement()),t(this.tripEvenListComponent,this.tripBoardComponent.getElement()),t(new o(e[0],i,n),this.tripEvenListComponent.getElement());for(const s of e)t(new p(s,i,n),this.tripEvenListComponent.getElement())}}({tripContainer:f,pointsModel:_});t(new class{getTemplate(){return'<form class="trip-filters" action="#" method="get">\n    <div class="trip-filters__filter">\n      <input id="filter-everything" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="everything" checked>\n      <label class="trip-filters__filter-label" for="filter-everything">Everything</label>\n    </div>\n\n    <div class="trip-filters__filter">\n      <input id="filter-future" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="future">\n      <label class="trip-filters__filter-label" for="filter-future">Future</label>\n    </div>\n\n    <div class="trip-filters__filter">\n      <input id="filter-present" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="present">\n      <label class="trip-filters__filter-label" for="filter-present">Present</label>\n    </div>\n\n    <div class="trip-filters__filter">\n      <input id="filter-past" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="past">\n      <label class="trip-filters__filter-label" for="filter-past">Past</label>\n    </div>\n\n    <button class="visually-hidden" type="submit">Accept filter</button>\n  </form>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}},v),t(new class{getTemplate(){return'<button class="trip-main__event-add-btn  btn  btn--big  btn--yellow" type="button">New event</button>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}},d),u.init()})();
//# sourceMappingURL=bundle.72cb968f8360ff721a9c.js.map